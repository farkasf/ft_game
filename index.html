<!DOCTYPE html>
<html data-bs-theme="light" lang="en" style="height: 95%;width: 95%;">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>pong</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Work+Sans:300,400,500,700,800&amp;display=swap">
    <link rel="stylesheet" href="assets/css/Login-Form-Basic-icons.css">
    <link rel="stylesheet" href="assets/css/styles.css">
	<script data-require="three.js@0.128.0" data-semver="0.128.0" src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
	<script src="pong_game.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Exo+2&display=swap" rel="stylesheet">
</head>

<body>
	<main class="w-100 h-100">
		<section class="d-flex flex-column" style="width: 100%;height: 100%;background: url(&quot;assets/img/background.gif&quot;) center / 100% 101% no-repeat;margin: 0;" id="content">
			<div class="container d-flex justify-content-center justify-content-md-start align-items-md-start" style="padding: 5px;height: auto;">
				<button class="btn btn-sm fs-5" type="button" style="padding: 5px;width: 3%;background: #000000;">en</button>
				<button class="btn btn-sm fs-5" type="button" style="margin: 0 15px;padding: 5px;width: 3%;background: #000000;">cs</button>
				<button class="btn btn-sm fs-5" type="button" style="padding: 5px;width: 3%;background: #000000;">it</button>
			</div>
			<div class="container d-flex justify-content-center align-items-end">
				<button class="btn btn-light fs-3" type="button" style="padding: 20px;width: 15%;" onclick="loadPage('home')">login</button>
				<button class="btn btn-light fs-3" type="button" style="margin: 0 70px;padding: 20px;width: 15%;" onclick="loadPage('sign_up')">sign up</button>
				<button class="btn btn-light fs-3" type="button" style="padding: 20px;width: 15%;">about</button>
			</div>
			<div class="container d-flex flex-column justify-content-end align-items-start">
				<h1 class="display-3 fw-bold text-main">ft_transcendence</h1>
				<p class="text-info text-badge mb-5">created by sbenes, gabtan, ffarkas, tkajanek &amp; ehasalu</p>
			</div>
		</section>
	</main>
    
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script>
		let currentPage
		
		document.addEventListener("keydown",(e)=>{
        	console.log(e.keyCode)
			if (e.keyCode !== 81) return
			if (currentPage == "game") loadPage("home")
    	})

        function loadPage(pageName) {
			fetch(pageName + ".html")
			.then((response)=>response.text())
			.then((html)=>{
				document.querySelector("main").innerHTML = html;
				history.pushState({ page: pageName }, '', pageName);

				currentPage = pageName

				if(pageName === "home") addChoiceListeners()

			})
			.catch((err)=>console.log("Failed to fetch page:", err))
        }

        // Listen for popstate event to handle back/forward button clicks
        window.addEventListener('popstate', function(event) {
            // Check if there is a state associated with the popped history entry
            if (event.state && event.state.page) {
                // Load the corresponding page using AJAX
                loadPage(event.state.page);
            } else {
                // If no state is associated, load the initial page (e.g., index.html)
                loadPage('index');
            }
        });

		function updateImage(imageSrc, text) {
				document.getElementById('image-container').innerHTML = `<img style="max-width: 100%;max-height: 100%;width: 50%;" src="assets/img/${imageSrc}"><p class="fs-4" style="margin-top: 5%;">${text}</p>`;
			}

		function addChoiceListeners() {
				console.log("page home")
				let vsAIChoice = document.getElementById("vsAIChoice");
				let vsPlayerChoice = document.getElementById("vsPlayerChoice");
		
			vsAIChoice.addEventListener("change", function() {
				console.log('vsAI checked')
				if (vsAIChoice.checked) {
					gameMode = 1;
				}
			});
		
			vsPlayerChoice.addEventListener("change", function() {
				console.log('vsPlayer checked')
				if (vsPlayerChoice.checked) {
					gameMode = 2;
				}
			});
		
			// Check the initial state when the page loads
			if (vsAIChoice.checked) {
				gameMode = 1;  // "1 vs AI"
			} else if (vsPlayerChoice.checked) {
				gameMode = 2;  // "1 vs 1"
			}
			}
    </script>
</body>

</html>
